// (c) 2010 CodePlex Foundation
(function(){var b="ExtendedConfirmButton";function a(){var d="hidden",c="showing",g="ConfirmText",f="displayModalPopupID",e="function",b="onclick",a=null;Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.ConfirmButtonHiddenEventArgs=function(a){Sys.Extended.UI.ConfirmButtonHiddenEventArgs.initializeBase(this);this._confirmed=a};Sys.Extended.UI.ConfirmButtonHiddenEventArgs.prototype={get_confirmed:function(){return this._confirmed}};Sys.Extended.UI.ConfirmButtonHiddenEventArgs.registerClass("Sys.Extended.UI.ConfirmButtonHiddenEventArgs",Sys.EventArgs);Sys.Extended.UI.ConfirmButtonBehavior=function(c){var b=this;Sys.Extended.UI.ConfirmButtonBehavior.initializeBase(b,[c]);b._ConfirmTextValue=a;b._OnClientCancelValue=a;b._ConfirmOnFormSubmit=false;b._displayModalPopupID=a;b._postBackScript=a;b._clickHandler=a;b._oldScript=a};Sys.Extended.UI.ConfirmButtonBehavior.prototype={initialize:function(){var c=this;Sys.Extended.UI.ConfirmButtonBehavior.callBaseMethod(c,"initialize");var d=c.get_element();c._clickHandler=Function.createDelegate(c,c._onClick);$addHandler(d,"click",c._clickHandler);c._oldScript=d.getAttribute(b);c._oldScript&&d.setAttribute(b,a);if(c._ConfirmOnFormSubmit&&typeof WebForm_OnSubmit==e&&!Sys.Extended.UI.ConfirmButtonBehavior._originalWebForm_OnSubmit)if(Sys.Extended.UI.TextBoxWatermarkBehavior&&Sys.Extended.UI.TextBoxWatermarkBehavior._originalWebForm_OnSubmit){Sys.Extended.UI.ConfirmButtonBehavior._originalWebForm_OnSubmit=Sys.Extended.UI.TextBoxWatermarkBehavior._originalWebForm_OnSubmit;Sys.Extended.UI.TextBoxWatermarkBehavior._originalWebForm_OnSubmit=Sys.Extended.UI.ConfirmButtonBehavior.WebForm_OnSubmit}else{Sys.Extended.UI.ConfirmButtonBehavior._originalWebForm_OnSubmit=WebForm_OnSubmit;WebForm_OnSubmit=Sys.Extended.UI.ConfirmButtonBehavior.WebForm_OnSubmit}},dispose:function(){var c=this;if(c._clickHandler){$removeHandler(c.get_element(),"click",c._clickHandler);c._clickHandler=a}if(c._oldScript){c.get_element().setAttribute(b,c._oldScript);c._oldScript=a}Sys.Extended.UI.ConfirmButtonBehavior.callBaseMethod(c,"dispose")},_onClick:function(b){var a=this;if(a.get_element()&&!a.get_element().disabled)if(a._ConfirmOnFormSubmit)Sys.Extended.UI.ConfirmButtonBehavior._clickedBehavior=a;else if(!a._displayConfirmDialog()){b.preventDefault();return false}else if(a._oldScript)if(String.isInstanceOfType(a._oldScript))eval(a._oldScript);else typeof a._oldScript==e&&a._oldScript()},_displayConfirmDialog:function(){var a=this,c=new Sys.CancelEventArgs;a.raiseShowing(c);if(c.get_cancel())return;if(a._displayModalPopupID){var b=$find(a._displayModalPopupID);if(!b)throw Error.argument(f,String.format(Sys.Extended.UI.Resources.CollapsiblePanel_NoControlID,a._displayModalPopupID));b.set_OnOkScript("$find('"+a.get_id()+"')._handleConfirmDialogCompletion(true);");b.set_OnCancelScript("$find('"+a.get_id()+"')._handleConfirmDialogCompletion(false);");b.show();return false}else{var d=window.confirm(a._ConfirmTextValue);a._handleConfirmDialogCompletion(d);return d}},_handleConfirmDialogCompletion:function(b){var a=this;a.raiseHidden(new Sys.Extended.UI.ConfirmButtonHiddenEventArgs(b));if(b){if(a._postBackScript)eval(a._postBackScript)}else a._OnClientCancelValue&&window[a._OnClientCancelValue]()},get_OnClientCancel:function(){return this._OnClientCancelValue},set_OnClientCancel:function(a){if(this._OnClientCancelValue!=a){this._OnClientCancelValue=a;this.raisePropertyChanged("OnClientCancel")}},get_ConfirmText:function(){return this._ConfirmTextValue},set_ConfirmText:function(a){if(this._ConfirmTextValue!=a){this._ConfirmTextValue=a;this.raisePropertyChanged(g)}},get_ConfirmOnFormSubmit:function(){return this._ConfirmOnFormSubmit},set_ConfirmOnFormSubmit:function(a){if(this._ConfirmOnFormSubmit!=a){this._ConfirmOnFormSubmit=a;this.raisePropertyChanged("ConfirmOnFormSubmit")}},get_displayModalPopupID:function(){return this._displayModalPopupID},set_displayModalPopupID:function(a){if(this._displayModalPopupID!=a){this._displayModalPopupID=a;this.raisePropertyChanged(f)}},get_postBackScript:function(){return this._postBackScript},set_postBackScript:function(a){if(this._postBackScript!=a){this._postBackScript=a;this.raisePropertyChanged("postBackScript")}},add_showing:function(a){this.get_events().addHandler(c,a)},remove_showing:function(a){this.get_events().removeHandler(c,a)},raiseShowing:function(b){var a=this.get_events().getHandler(c);a&&a(this,b)},add_hidden:function(a){this.get_events().addHandler(d,a)},remove_hidden:function(a){this.get_events().removeHandler(d,a)},raiseHidden:function(b){var a=this.get_events().getHandler(d);a&&a(this,b)}};Sys.Extended.UI.ConfirmButtonBehavior.registerClass("Sys.Extended.UI.ConfirmButtonBehavior",Sys.Extended.UI.BehaviorBase);Sys.registerComponent(Sys.Extended.UI.ConfirmButtonBehavior,{name:"confirmButton",parameters:[{name:g,type:"String"}]});Sys.Extended.UI.ConfirmButtonBehavior.WebForm_OnSubmit=function(){var b=Sys.Extended.UI.ConfirmButtonBehavior._originalWebForm_OnSubmit();if(b&&Sys.Extended.UI.ConfirmButtonBehavior._clickedBehavior)b=Sys.Extended.UI.ConfirmButtonBehavior._clickedBehavior._displayConfirmDialog();Sys.Extended.UI.ConfirmButtonBehavior._clickedBehavior=a;return b}}if(window.Sys&&Sys.loader)Sys.loader.registerScript(b,["ExtendedBase"],a);else a()})();